{# templates/index.twig #}

{% extends 'base.twig' %}

{% block body %}
{# 聊天区域 #}
<div class="chat" id="J_scrollContent">
  <div class="chat-time">
      <span class="chat-time-text">9月6日 上午12:00</span>
  </div>
  <div class="message-list" id="J_msgList"></div>
</div>
{# 图片弹层 #}
<div class="full-pics" id="J_fullPics">
  <div class="pic">
      <span class="heartbeat-loader">Loading…</span>
  </div>
</div>
{# 语音聊天 #}
{% if page  %}  
<div class="full-pics full-pics-white full-pics-man" id="J_voice">
{% else %}
<div class="full-pics full-pics-white full-pics-neo" id="J_voice">
{% endif %}
  <div class="voice-wrap">
      <div class="voice-avatar">
          {% if page  %}  
          <img src="{{assets}}/img/avatar-2.jpg" alt="冯蔓">
          {% else %}
          <img src="{{assets}}/img/avatar-1.png" alt="常鸿飞">
          {% endif %}
      </div>
      <div class="voice-user">
          {% if page  %}  
          <p class="voice-name">冯蔓</p>
          {% else %}
          <p class="voice-name">常鸿飞</p>
          {% endif %}
          <p class="voice-sub">邀请你进行语音聊天</p>
      </div>
      <div class="voice-tips voice-tips-small">
          <span class="js-callOut" id="J_callOutText">对方已切到语音聊天，请确保音量打开并不影响别人</span>
          <span class="js-hangUp hide" id="J_hangUpText">~别挂断啊~</span>
          <span class="js-connect hide" id="J_connectText">请用听筒接听</span>
          <span class="js-break hide" id="J_breakText">通话结束</span>
      </div>
      <div class="voice-operation js-callOut">
          <div class="fl">
              <p class="iconfont icon-hang" id="J_hangUp"></p>
              <p>挂断</p>
          </div>
          <div class="fr">
              <p class="iconfont icon-dianhua" id="J_connect"></p>
              <p>接听</p>
          </div>
      </div>
      <div class="voice-time js-connect hide">
          <p id="J_voiceDuration">00:00</p>
      </div>
      <div class="voice-operation-ing js-connect hide">
          <div class="fl">
              <p class="iconfont icon-jingyin"></p>
              <p>静音</p>
          </div>
          <div class="fl red">
              <p class="iconfont icon-hang" id="J_break"></p>
              <p>挂断</p>
          </div>
          <div class="fl">
              <p class="iconfont icon-shengyin"></p>
              <p>免提</p>
          </div>
      </div>
  </div>
</div>
{# 音频资源 #}
<audio id="message-push-music" preload>
    <source src="{{assets}}/music/msg.mp3" type="audio/mp3">
</audio>
<audio id="call-out-music" loop preload>
    <source src="{{assets}}/music/wait.mp3" type="audio/mp3">
</audio>
<audio id="connect-voice" preload>
    {% if page  %}  
    <source src="{{assets}}/music/man.mp3" type="audio/mp3">
    {% else %}
    <source src="{{assets}}/music/neo.mp3" type="audio/mp3">
    {% endif %}
</audio>
<audio id="cut-voice" preload>
    <source src="{{assets}}/music/cut.mp3" type="audio/mp3">
</audio>
{# 腾讯地图 #}
<div class="layer-iframe" id="J_iframe">
    <a href="javascript:;" class="layer-close" id="J_closeLayer"></a>
    <iframe src="http://3gimg.qq.com/lightmap/v1/marker/?marker=coord:35.757210,115.025430;title:濮阳市瑞丰园;addr:常鸿飞、冯蔓 诚挚邀请&referer=myapp&key=GUCBZ-FDOK4-MMHUB-DJ7UD-MUV7O-FQBWU"
            frameborder="0"></iframe>
</div>
{# 表单区域 #}
<div class="layer-form">
    <div class="layer-warp">
        <div class="form-wrap">
            <div class="attend-form">
                <div class="weui-cells">
                    <div class="weui-cell">
                        <div class="weui-cell__hd"><label class="weui-label">宾客姓名</label></div>
                        <div class="weui-cell__bd">
                            <input class="weui-input" name="vip" type="text" placeholder="请输入姓名">
                        </div>
                    </div>
                    <div class="weui-cell weui-cell_select">
                        <div class="weui-cell__hd"><label class="weui-label">赴宴人数</label></div>
                        <div class="weui-cell__bd">
                            <select class="weui-select" name="attendNumber">
                                <option value="1">一位</option>
                                <option value="2">两位</option>
                                <option value="3">三位</option>
                                <option value="4">四位</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>
            <div class="blessing-form">
                <div class="weui-cells">
                    <div class="weui-cell">
                        <div class="weui-cell__hd"><label class="weui-label">宾客姓名</label></div>
                        <div class="weui-cell__bd">
                            <input class="weui-input" name="vip" type="text" placeholder="请输入姓名">
                        </div>
                    </div>
                    <div class="weui-cell">
                        <div class="weui-cell__bd">
                            <textarea class="weui-textarea" name="blessing" placeholder="写下祝福" rows="2"></textarea>
                        </div>
                    </div>
                </div>
            </div>
            <div class="button-group">
                <a href="javascript:;" class="btn-return" id="J_returnBtn"></a>
                <a href="javascript:;" class="btn-confirm" id="J_attendBtn"></a>
                <a href="javascript:;" class="btn-confirm" id="J_blessingBtn"></a>
            </div>
        </div>
    </div>
    <div class="weui-toast weui_loading_toast">姓名不能为空</div>
</div>
{% endblock %}
{% block footer %}
{# 模板区域 #}
<script id="tpl" type="text/html">
  <div class="message-wrap">
      <div class="message self">
          <div class="m-avatar">
              <img src="{{assets}}<%= author.avatar %>" alt="<%= author.name %>">
          </div>
          <div class="m-content">
              <p class="author-name"><%= author.name %></p>
              <% if (type=="plain") { %> 
              <div class="bubble bubble-default">
                  <div class="b-content">
                      <div class="plain">
                          <p><%- content %></p>
                      </div>
                  </div>
              </div>
              <% } else if (type=="picture") { %>
              <div class="bubble bubble-image">
                  <div class="b-content">
                      <% if (extra=="emoji") { %>
                      <div class="picture picture-emoji is-loading">
                          <span class="heartbeat-loader">Loading…</span>
                          <img class="img-emoji" src="{{assets}}<%= content %>">
                      </div>
                      <% } else if (extra=="width") { %>
                      <div class="picture picture-width is-loading">
                          <span class="heartbeat-loader">Loading…</span>
                          <img class="img-width J_img" src="{{assets}}<%= content %>">
                      </div>
                      <% } else if (extra=="height") { %>
                      <div class="picture picture-height is-loading">
                          <span class="heartbeat-loader">Loading…</span>
                          <img class="img-height J_img" src="{{assets}}<%= content %>">
                      </div>
                      <% } %>
                  </div>
              </div>
              <% } else if (type=="voice") { %>
              <div class="bubble bubble-voice">
                  <div class="b-content">
                      <div class="voice">
                          {% if page  %}
                              <p><i class="iconfont icon-hang"></i>聊天时长&nbsp;00:09</p>
                          {% else %}
                              <p><i class="iconfont icon-hang"></i>聊天时长&nbsp;00:17</p>
                          {% endif %}
                      </div>
                  </div>
              </div>
              <% } else if (type=="map") { %>
              <div class="bubble bubble-map">
                  <div class="b-content">
                      <div class="picture picture-map is-loading">
                          <span class="heartbeat-loader">Loading…</span>
                          <a href="javascript:;" id="J_showMap"><img class="img-map" src="{{assets}}<%= content %>"></a>
                      </div>
                  </div>
              </div>
              <% } else if (type=="invite") { %>
              <div class="bubble bubble-default">
                  <div class="b-content">
                      <div class="confirm">
                          <div class="confirm-hd"><img src="{{assets}}/img/ai.png">邀请你参加我们的婚礼<img src="{{assets}}/img/ai.png"></div>
                          <div class="confirm-bd">
                              <button type="button" class="button-blue" id="J_attend">亲临现场，见证幸福 <i
                                      class="iconfont icon-youjiantou"></i></button>
                              <button type="button" id="J_blessing">无法到场，送去祝福<i class="iconfont icon-youjiantou"></i>
                              </button>
                          </div>
                      </div>
                  </div>
              </div>
              <% } %>
          </div>
      </div>
  </div>
</script>
<script src="https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
<script src="https://cdn.bootcss.com/fastclick/1.0.6/fastclick.min.js"></script>
<script src="https://cdn.bootcss.com/jquery.imagesloaded/4.1.3/imagesloaded.pkgd.min.js"></script>
<script src="{{assets}}/lib/template-web.js"></script>
<script>
  var MASTER = '{{page}}';
  var POSTER_URI = '/poster';
  var VISIROR = '/visitor'
</script>
<script src="{{assets}}/js/invitation.min.js?v={{timestamp}}"></script>
{% endblock %}
