!function t(e,n,o){function i(r,c){if(!n[r]){if(!e[r]){var s="function"==typeof require&&require;if(!c&&s)return s(r,!0);if(a)return a(r,!0);var u=new Error("Cannot find module '"+r+"'");throw u.code="MODULE_NOT_FOUND",u}var l=n[r]={exports:{}};e[r][0].call(l.exports,function(t){var n=e[r][1][t];return i(n||t)},l,l.exports,t,e,n,o)}return n[r].exports}for(var a="function"==typeof require&&require,r=0;r<o.length;r++)i(o[r]);return i}({1:[function(t,e,n){$(function(){function t(){}function e(e){for(var n=new t,o=0;o<e.length;o++)n.add(e[o]);return n}function n(t,n){function o(t){void 0===t&&(t=1e3*Math.random()+600);var e=setTimeout(function(){if(i){var t=template("tpl",i.el);u.append(t),"picture"!==i.el.type&&"map"!==i.el.type||u.imagesLoaded(function(){u.find(".picture").removeClass("is-loading").find("span").remove()});var a=$(".chat-time").outerHeight(!0),r=s.height(),c=u.height();$("#message-push-music")[0].play(),c+a>r&&s.scrollTop(c+a-r),void 0!==i.el.pause?o(i.el.pause):o(),i=i._next}else clearTimeout(e),n&&n()},t)}var i=e(t)._first;o(0)}function o(t){$(".layer-loading").addClass("open"),$.ajax(VISIROR,{data:t,method:"POST",dataType:"json",success:function(t){if($(".layer-loading").removeClass("open"),200!==t.code)return i("抱歉，服务器异常~"),"";window.location.href=POSTER_URI},error:function(){$(".layer-loading").removeClass("open"),i("抱歉，服务器异常~")}})}function i(t){$(".weui-toast").text(t).addClass("weui-toast--visible").delay(1500).queue(function(){$(this).removeClass("weui-toast--visible").dequeue()})}FastClick.attach(document.body);var a="girl"===MASTER?1:0,r=(QI_NIU,{}),c={};t.prototype={add:function(t){return this._last?this._last=this._last._next={el:t,_next:null}:this._last=this._first={el:t,_next:null},this}};var s=$("#J_scrollContent"),u=$("#J_msgList"),l=$("#J_voice"),h=$("#call-out-music"),p={time:null,showVoice:function(){d.trigger("click"),l.show(),h[0].play()},hangUp:function(){var t=this;$("#J_hangUp").on("touchstart",function(){return t.textChange(),!1}).on("touchend",function(){return t.textChange(),!1}),$("#J_break").on("touchstart",function(){return t.textChangConnect(),!1}).on("touchend",function(){return t.textChangConnect(),!1})},connectVoice:function(){var t=this;$("#J_connect").on("touchend",function(){h[0].pause(),$(".js-callOut").addClass("hide"),$(".js-connect").removeClass("hide"),t.playVoice()})},textChange:function(){$("#J_callOutText").toggleClass("hide"),$("#J_hangUpText").toggleClass("hide")},textChangConnect:function(){$("#J_connectText").toggleClass("hide"),$("#J_hangUpText").toggleClass("hide")},playVoice:function(){var t=this,e=$("#connect-voice");e[0].play(),t.timeStart(),e.on("ended",function(){t.timeOver(),t.breakVoice()})},timeStart:function(){var t=this,e=0,n=$("#J_voiceDuration");t.time=setInterval(function(){(e+=1).toString().length<2?n.text("00:0"+e):n.text("00:"+e)},1e3)},breakVoice:function(){var t=this;$("#J_breakText").removeClass("hide").siblings().addClass("hide");var e=$("#cut-voice");e[0].play(),e.on("ended",function(){t.closeVoice()})},timeOver:function(){var t=this;clearInterval(t.time)},closeVoice:function(){l.hide(),n(r.d1)},init:function(){this.hangUp(),this.connectVoice()}};p.init(),function(t){var e={},n={neo:{id:"neo",name:"常鸿飞",avatar:QI_NIU+"/img/avatar-1.jpg"},man:{id:"neo",name:"冯蔓",avatar:QI_NIU+"/img/avatar-2.jpg"}};c=$.extend(c,n),e=t?c.man:c.neo,r.d0=[{type:"picture",extra:"emoji",author:e,content:QI_NIU+"/img/wai.gif"},{type:"plain",author:e,content:"Hi，我"+e.name+"呀"},{type:"plain",author:e,content:"告诉你一件事，我要结婚了"},{type:"plain",author:e,content:"哈哈，谢谢谢谢。",pause:2e3},{type:"plain",author:e,content:"前方高能！！！",pause:2e3},{type:"picture",extra:"width",author:e,content:QI_NIU+"/photo-1.jpg"},{type:"picture",extra:"width",author:e,content:QI_NIU+"/photo-2.jpg"},{type:"picture",extra:"width",author:e,content:QI_NIU+"/photo-3.jpg"},{type:"picture",extra:"width",author:e,content:QI_NIU+"/photo-4.jpg"},{type:"picture",extra:"width",author:e,content:QI_NIU+"/photo-5.jpg"},{type:"picture",extra:"width",author:e,content:QI_NIU+"/photo-6.jpg"},{type:"picture",extra:"width",author:e,content:QI_NIU+"/photo-7.jpg",pause:2e3}],r.d1=[{type:"voice",author:e},{type:"plain",author:e,content:"具体时间地点如下："},{type:"plain",author:e,content:"2017年10月5日 11点28分<br>濮阳市 瑞丰园 三楼"},{type:"plain",author:e,content:"这是地图。温馨提示：关闭地图点击右上角红叉。不然要重新打开了。๑乛v乛๑"},{type:"map",author:e,content:QI_NIU+"/img/map.png"},{type:"invite",author:e}]}(a),n(r.d0,function(){p.showVoice()});var d=$("#J_fullPics"),f=d.find(".pic");$(document).on("click",".J_img",function(){var t=$(this).attr("src");t&&(f.append('<img src="'+t.replace(/.clouddn.com/,".clouddn.com/big")+'" style="display: none;">'),f.imagesLoaded(function(){f.find(".heartbeat-loader").hide(),f.find("img").show()}),d.show())}).on("click","#J_fullPics",function(){d.hide(),f.find(".heartbeat-loader").show(),f.find("img").remove()}).on("click","#J_showMap",function(){$("#J_iframe").addClass("bounceInUp")}).on("click","#J_closeLayer",function(){$("#J_iframe").removeClass("bounceInUp")}).on("click","#J_attend",function(){_.showAttend()}).on("click","#J_blessing",function(){_.showBlessing()}).on("click","#J_returnBtn",function(){_.closeForm()});var m=$(".layer-form"),g=$(".attend-form"),v=$(".blessing-form"),_={showAttend:function(){m.show(),g.show(),$("#J_attendBtn").show()},showBlessing:function(){m.find(".form-wrap").addClass("form-top-wrap"),m.show(),v.show(),$("#J_blessingBtn").show()},closeForm:function(){m.hide(),g.hide(),v.hide(),$(".btn-confirm").hide(),m.find(".form-wrap").removeClass("form-top-wrap")}};$("#J_attendBtn").click(function(){var t=$(".attend-form"),e={};if(e.name=t.find('input[name="vip"]').val(),e.number=t.find('select[name="attendNumber"]').val(),e.type=1,e.belong=a,!e.name)return i("姓名不能为空");o(e)}),$("#J_blessingBtn").click(function(){var t=$(".blessing-form"),e={};return e.name=t.find('input[name="vip"]').val(),e.blessing=t.find('textarea[name="blessing"]').val(),e.type=2,e.belong=a,e.name?e.blessing?void o(e):i("祝福一下呗~"):i("姓名不能为空")})})},{}]},{},[1]);
//# sourceMappingURL=invitation.min.js.map
