!function t(e,n,o){function i(r,c){if(!n[r]){if(!e[r]){var s="function"==typeof require&&require;if(!c&&s)return s(r,!0);if(a)return a(r,!0);var u=new Error("Cannot find module '"+r+"'");throw u.code="MODULE_NOT_FOUND",u}var h=n[r]={exports:{}};e[r][0].call(h.exports,function(t){var n=e[r][1][t];return i(n||t)},h,h.exports,t,e,n,o)}return n[r].exports}for(var a="function"==typeof require&&require,r=0;r<o.length;r++)i(o[r]);return i}({1:[function(t,e,n){$(function(){function t(){}function e(e){for(var n=new t,o=0;o<e.length;o++)n.add(e[o]);return n}function n(t,n){function o(t){void 0===t&&(t=1e3*Math.random()+600);var e=setTimeout(function(){if(i){var t=template("tpl",i.el);l.append(t),"picture"!==i.el.type&&"map"!==i.el.type||l.imagesLoaded(function(){l.find(".picture").removeClass("is-loading").find("span").remove()});var a=$(".chat-time").outerHeight(!0),r=h.height(),c=l.height();$("#message-push-music")[0].play(),c+a>r&&h.scrollTop(c+a-r),void 0!==i.el.pause?o(i.el.pause):o(),i=i._next}else clearTimeout(e),n&&n()},t)}var i=e(t)._first;o(0)}function o(t){$(".layer-loading").addClass("open"),$.ajax(VISIROR,{data:t,method:"POST",dataType:"json",success:function(t){if($(".layer-loading").removeClass("open"),200!==t.code)return i("抱歉，服务器异常~"),"";window.location.href=POSTER_URI},error:function(){$(".layer-loading").removeClass("open"),i("抱歉，服务器异常~")}})}function i(t){$(".weui-toast").text(t).addClass("weui-toast--visible").delay(1500).queue(function(){$(this).removeClass("weui-toast--visible").dequeue()})}FastClick.attach(document.body);var a=!!Cookies.get("isVisit"),r={ua:navigator.userAgent.toLowerCase(),isWeixin:function(){return/micromessenger/.test(this.ua)},isAndroid:function(){return/android/.test(this.ua)}};r.isAndroid()?$("audio").each(function(){$(this).attr("src",$(this).data("src")),$(this)[0].load()}):r.isWeixin()?$(document).one("WeixinJSBridgeReady",function(){$("audio").each(function(){$(this)[0].play(),$(this).attr("src",$(this).data("src")),$(this)[0].load()})}):$(document).one("touchstart",function(){$("audio").each(function(){$(this)[0].play(),$(this).attr("src",$(this).data("src")),$(this)[0].load()})});var c="girl"===MASTER?1:0,s=(QI_NIU,{}),u={};t.prototype={add:function(t){return this._last?this._last=this._last._next={el:t,_next:null}:this._last=this._first={el:t,_next:null},this}};var h=$("#J_scrollContent"),l=$("#J_msgList"),p=$("#J_voice"),d=$("#call-out-music"),f={time:null,showVoice:function(){m.trigger("click"),p.show(),d[0].play()},hangUp:function(){var t=this;$("#J_hangUp").on("touchstart",function(){return t.textChange(),!1}).on("touchend",function(){return t.textChange(),!1}),$("#J_break").on("touchstart",function(){return t.textChangeConnect(),!1}).on("touchend",function(){return t.textChangeConnect(),!1})},connectVoice:function(){var t=this;$("#J_connect").on("touchend",function(){d[0].pause(),$(".js-callOut").addClass("hide"),$(".js-connect").removeClass("hide"),t.playVoice()})},textChange:function(){$("#J_callOutText").toggleClass("hide"),$("#J_hangUpText").toggleClass("hide")},textChangeConnect:function(){$("#J_connectText").toggleClass("hide"),$("#J_hangUpText").toggleClass("hide")},playVoice:function(){var t=this,e=$("#connect-voice");e[0].play(),t.timeStart(),e.on("ended",function(){t.timeOver(),t.breakVoice()})},timeStart:function(){var t=this,e=0,n=$("#J_voiceDuration");t.time=setInterval(function(){(e+=1).toString().length<2?n.text("00:0"+e):n.text("00:"+e)},1e3)},breakVoice:function(){var t=this;$("#J_connectText").text("通话结束"),$("#J_break").off("touchstart touchend");var e=$("#cut-voice");e[0].play(),e.on("ended",function(){t.closeVoice()})},timeOver:function(){var t=this;clearInterval(t.time)},closeVoice:function(){p.hide(),n(s.d1)},init:function(){this.hangUp(),this.connectVoice()}};f.init(),function(t){var e={},n={neo:{id:"neo",name:"常鸿飞",avatar:QI_NIU+"/img/avatar-1.jpg"},man:{id:"neo",name:"冯蔓",avatar:QI_NIU+"/img/avatar-2.jpg"}};u=$.extend(u,n),e=t?u.man:u.neo,s.d0=[{type:"picture",extra:"emoji",author:e,content:QI_NIU+"/img/wai.gif"},{type:"plain",author:e,content:"Hi，我"+e.name+"呀"},{type:"plain",author:e,content:"告诉你一件事，我要结婚了",pause:2e3},{type:"plain",author:e,content:"哈哈，谢谢谢谢。"},{type:"plain",author:e,content:"前方高能！！！",pause:2e3},{type:"picture",extra:"width",author:e,content:QI_NIU+"/photo-1.jpg"},{type:"picture",extra:"width",author:e,content:QI_NIU+"/photo-2.jpg"},{type:"picture",extra:"width",author:e,content:QI_NIU+"/photo-3.jpg"},{type:"picture",extra:"width",author:e,content:QI_NIU+"/photo-4.jpg"},{type:"picture",extra:"height",author:e,content:QI_NIU+"/photo-5.jpg"},{type:"picture",extra:"height",author:e,content:QI_NIU+"/photo-6.jpg"},{type:"picture",extra:"width",author:e,content:QI_NIU+"/photo-7.jpg",pause:2e3}],s.d1=[{type:"voice",author:e},{type:"plain",author:e,content:"具体时间地点如下："},{type:"plain",author:e,content:"2017年10月5日 11点28分<br>濮阳市 瑞丰园 三楼"},{type:"plain",author:e,content:"这是地图。温馨提示：关闭地图点击右上角红叉。不然要重新打开了。๑乛v乛๑"},{type:"map",author:e,content:QI_NIU+"/img/map.png"},{type:"invite",author:e}],s.d2=[{type:"plain",author:e,content:"你又肥来了。"},{type:"plain",author:e,content:"照片忘了存了？"},{type:"picture",extra:"width",author:e,content:QI_NIU+"/photo-7.jpg"},{type:"plain",author:e,content:"日期地址忘记了？"},{type:"plain",author:e,content:"2017年10月5日 11点28分<br>濮阳市 瑞丰园 三楼"},{type:"map",author:e,content:QI_NIU+"/img/map.png"},{type:"plain",author:e,content:"要不直接看看海报？"},{type:"link",author:e,pause:2e3},{type:"plain",author:e,content:"安排变卦了？"},{type:"invite",author:e},{type:"button",author:e}]}(c),a?n(s.d2):n(s.d0,function(){f.showVoice()});var m=$("#J_fullPics"),g=m.find(".pic");$(document).on("click",".J_img",function(){var t=$(this).attr("src");t&&(g.append('<img src="'+t.replace(/.clouddn.com/,".clouddn.com/big")+'" style="display: none;">'),g.imagesLoaded(function(){g.find(".heartbeat-loader").hide(),g.find("img").show()}),m.show())}).on("click","#J_fullPics",function(){m.hide(),g.find(".heartbeat-loader").show(),g.find("img").remove()}).on("click","#J_showMap",function(){$("#J_iframe").addClass("bounceInUp")}).on("click","#J_closeLayer",function(){$("#J_iframe").removeClass("bounceInUp")}).on("click","#J_attend",function(){w.showAttend()}).on("click","#J_blessing",function(){w.showBlessing()}).on("click","#J_returnBtn",function(){w.closeForm()}).on("click","#J_resetBtn",function(){Cookies.remove("isVisit",{path:""}),window.location.reload()});var v=$(".layer-form"),y=$(".attend-form"),_=$(".blessing-form"),w={showAttend:function(){v.show(),y.show(),$("#J_attendBtn").show()},showBlessing:function(){v.find(".form-wrap").addClass("form-top-wrap"),v.show(),_.show(),$("#J_blessingBtn").show()},closeForm:function(){v.hide(),y.hide(),_.hide(),$(".btn-confirm").hide(),v.find(".form-wrap").removeClass("form-top-wrap")}};$("#J_attendBtn").click(function(){var t=$(".attend-form"),e={};if(e.name=t.find('input[name="vip"]').val(),e.number=t.find('select[name="attendNumber"]').val(),e.type=1,e.belong=c,!e.name)return i("姓名不能为空");o(e)}),$("#J_blessingBtn").click(function(){var t=$(".blessing-form"),e={};return e.name=t.find('input[name="vip"]').val(),e.blessing=t.find('textarea[name="blessing"]').val(),e.type=2,e.belong=c,e.name?e.blessing?void o(e):i("祝福一下呗~"):i("姓名不能为空")})})},{}]},{},[1]);
//# sourceMappingURL=invitation.min.js.map
